Discriminating the Machine-printed and Hand-written Words Based on 
Legibility  
Shahin Akbarpour1,2      Md. Nasir Bin Sulaiman2      Norwati Mustapha2       Rahmita Wirza Rahmat2 
1Dept of Computer and mathematics, Islamic Azad university of Shabestar, E.  Azerbaijan, Iran. 
2Faculty of Computer Science and Information Technology, Universiti Putra Malaysia. 
                                                
1 Shahin Akbarpour is PhD candidate in faculty of Computer Science and Information Technology, University Putra Malaysia. 
Abstract 
Discrimination of machine-printed and hand-written 
words is deemed as a major problem in the recognition of 
the mixed texts. To present a new method to distinguish 
between machine-printed words and hand-written words 
using a novel statistical feature on base legibility and 
discriminator threshold are objectives of this study. 
Because of the hand trembling, sudden uncontrollable 
movement of hand and sudden pen shift on the paper, 
machine-printed words are more legible than hand-
written words. The feature is extracted using the Freeman 
chain code as they are focused on measurement of words 
legibility. The obtained quantity, which is introduced in 
this work for the first time, could be a distinguishing 
criterion for machine-printed words from hand-written. 
Practically, our method is applied to a mixed and 
unrefined Farsi database which includes the two above 
typologies of words. Removing machine-printed words 
from database and constructing a pure hand-written 
Farsi words is the other objective. Determining the 
threshold level, the accuracy rate of the method employed 
was calculated to be over 96.02%. 
Key Words:  Discriminating the Machine-printed and 
Hand-written Words, Freeman Chain cods, Legibility of 
word, Word recognition. 
1. Introduction 
Machine-printed and hand-written words appear 
together in several types of texts, especially in form 
documents, envelops, cheque and so on which are 
combined two parts. In all mentioned cases it is crucial to 
detect, distinguish and process differently the areas of 
handwritten and printed text for obvious reasons such as: 
(a) retrieval of important information (b) removal of 
unnecessary information, and (c) application of different 
recognition algorithms in each case. 
To obtain the high accuracy rate in recognition the 
machine-printed and hand-written words, one must 
distinguish these two different types of words in text. 
There are many methods of discrimination of machine-
printed words from hand-written words. Previous work on 
this subject concerns the classification of text on the line-
level, word-level or character-level, for documents with 
different language. Zheng et al. [7] perform text 
identification in noisy documents with comparative results 
for all levels. Fan et al. [2] perform detection of 
handwriting using structural characteristics for Chinese 
and English and report an accuracy rate of 85%. Pal et al. 
[5] process Indian letters and the reported accuracy rate 
reaches 98.6%. Nitz et al. [8] apply text detection for mail 
facing and orientation purposes. Ma et al. [9] localize 
non-Latin script in Latin documents. Koyama et al. [12] 
transformed a local region in a document image into 
frequency domain to extract feature values including 
fluctuations caused by handwriting. E. Kavallieratou et al. 
[10] presented a trainable approach to discriminate 
between machine-printed and hand-written text. An 
integrated system able to localize text areas and split them 
in text-lines is used. Wahl et al. [2] discussed a number of 
possible measures to discriminate text blocks within a 
document, but their general requirement is to discriminate 
printed text from graphics or image data. The following 
features were selected for further investigation by A. C. 
Downton et.al [3]: I) Contour regularity, II) Pixel density  
One of the discriminating criteria in human vision is 
legibility of words (penmanship) which could be true of 
computer vision as well. It is obvious that, in most cases 
the machine-printed word is more legible than hand-
written one. In this paper a measurement factor for 
legibility of words is presented which can evaluate it 
2010 Seventh International Conference on Information Technology
978-0-7695-3984-3/10 $26.00 © 2010 IEEE
DOI 10.1109/ITNG.2010.187
364
Authorized licensed use limited to: Aegean University. Downloaded on July 27,2010 at 15:13:07 UTC from IEEE Xplore.  Restrictions apply. 
accurately and conveniently. We could calculate a 
discriminator threshold to categorize each word in a list of 
the same name to two groups: 1) machine-printed words 
2) hand-written words 
This paper is organized as follows: In section 2, we 
succinctly introduce and Freeman chain code. A simple 
geometric classification method is described in section 3. 
In section 4 a new criterion is proposed for legibility of 
words. In section 5, a function is innovated to quantify 
legibility of words. A new discriminator threshold is 
introduced in section 6. The obtained results have 
presented in section 7 after applying our method on a new 
Farsi mixed Machine-printed and hand-written words.
2. Freeman Chain code  
Direction features play an important role in different 
between various manuscripts which can be determined in 
different ways. To do this, the direction angle is partition 
into a fixed number of ranges and number of stroke 
segment in each angle ranges in taken feature value. The 
Freeman Chain code is one of them [10]. A region is a 
connected component and the boundary (also called the 
contour) of a region is the set of pixels in region that have 
one or more neighbors that are not in the region. 
	


Chain code is a linear structure that results from 
quantization of the trajectory traced by the centers of 
adjacent boundary elements in an image array [1]. The 
Chain codes are used to represent a boundary by a 
connected sequence of straight-line segments of specified 
length and direction. Typically, this representation is 
based on 4- or 8-connectivity of segments. The direction 
of each segment is coded by using a numbering scheme 
such as the ones shown in Figure2.  



3. A geometric classification algorithm (GCA) 
Suppose two classes of objects are given, an unseen 
object must assign to one of two classes. This problem can 
be formalized as follow. 
}.1{),(),...,,(),,( 2211 ±×∈ Xyxyxyx mm   (1) 
Here, X is a non-empty set which the patterns xi belong it. 
In this study, Machine-printed and Hand-written are 
labeled in sequence +1 and -1 which are embedded into a 
dot product space H. Lets define a similarity measure 
from the dot product in H,  

=
′=′
n
i
ii xxxx
1
][][:,     (2) 
Here ix][ denotes the ith entry of and xx ′, are two 
vectors. 
Based on Assumption that both classes are non-empty, the 
means of the two classes in feature space are displayed c+
and c- ,half way between c+ and c- lies the point c:= (c+ + 
c-)/2 and the vector w:= c+ - c- connecting the class means.  
The basic idea of the algorithm is to assign an unseen 
pattern to the class with closer mean therefore a test 
pattern x is assigned to the one whose mean is closer. This 
can be done by looking at the dot product between the 
vector x - c and w. In other word, x by checking whether 
the vector x - c encloses an angle smaller than /2 with w
which is illustrated in Figure3 . 
−= wcxy ),(sgn    (3) 


Here, if y>0 then x is a Machine-printed and also if y<0
then x is a hand-written. 
4. Feature of word legibility 
4.1 A criterion for word legibility 
A text apparently, independent of language, consists of 
words. A word includes letters and a letter is comprised 
by lines, curves, loops and dots (components of word), 
whose crooked, uneven and shaky shape and 
configuration give rise to the difference between hand-
written and machine-printed texts. Furthermore in this 
research has considered following motives to quantify and 
to make criteria for comparison hand-written with 
machine-printed:  
The writers’ hand trembling, hand uncontrollable 
movement and also the sudden changing direction of pen 
(the sudden pen shift) on the paper are principal causes of 
dissimilarities manuscripts of different persons in hand-
written texts.  
Against hand-written, the same machine-printed words 
with the same font and style are always resistance 
365
Authorized licensed use limited to: Aegean University. Downloaded on July 27,2010 at 15:13:07 UTC from IEEE Xplore.  Restrictions apply. 
changing in different time and machine. There is not any 
trembling and any sudden changing direction in machine. 
So the machine-printed texts more legible than hand-
written are seen. 
Legibility and illegibility of words could be a criterion 
to distinguish between these two types of words which 
will quantify next sections for first time in word 
recognition. In Figure 4, two contours are extracted from a 
hand-written and a machine-printed the same Farsi words 
().  

 !"#$
"%$

4.2 Quantity of legibility 
The hand trembling, sudden uncontrollable movement 
of hand and the sudden pen shift on the paper are 
quantified in this study. This quantity is a new feature for 
measurement of legibility and also a criterion to separate 
hand-written and machine-printed of the same words. This 
measurement is extracted from the Chain code of word 
binary image where it is the number of unequal codes in 
two successive pixels in the data structure Chain code 
which is named “QSP” 2.  
Suppose CC a sequence Chain code of word contour 
and n number of elements of it.  
CC = {xi: i = 1, 2 …, n},   (4) 
where xi is either 4-directional code or 8-directional 
code of a pixel on contour. Let D a set which includes 
changed chain codes in CC. The elements of D are codes 
of successive pixels of CC which are different. 
D = {xi: xi  xi+1, i = 1, 2 … , n-1, xi ∈  CC},  (5) 
QSP (D) = |D|.    (6) 
In other word, QSP is the number of elements of D
(cardinal number) which presents the measure of word 
legibility. 
5. The QSP 
The QSP function returns an integer value given a 
binary image word by (3). The value of QSP is a factor to 
compare of words legibility which has introduced above.  
In pattern recognition, the first stage is preprocessing of 
the word image. This preprocessing includes the image 
scaling, noise removal and morphology. The binary image 
of word where objects are illustrated by 1s and 
background by 0s, feeds to the QSP. At first, three other 
functions, “Contour”, “Chaincode” and “length” are 
called. These functions generate the counter of objects in 
                                                
2 The quantity of the sudden pen shift on the paper 
word image, store the constructed Chain codes of contour 
in array and count elements of the array sequentially. 
Then, the unequal codes in two sequential pixels in Chain 
code array are enumerated. The algorithm of the QSP is 
shown as following in detail: 
Function QSP (W: the binary image of word): 
Integer 
Begin of Function 
Counter = 0; 
B=Contour (W); 
CC=Chaincode (B); 
n = Length of CC; 
For I=1 to n-1 
  If CC(I) <> CC(I+1)  
              Counter = Counter +1; 
  End if 
End for 
QSP = Counter; 
End of Function
&	

Since a line author could not control his/her own hand 
movements and the changes of the pen direction, even in 
the same words, we guess that the QSP of machine-printed 
word is less than the QSP of hand-written.  
For more clarification, a realistic example is presented. 
In Figure 4, the contour of sub-word of   which is just 
one letter in median of “” is shown in two types of 
words.  The Chain code sequences and changed cods set 
of two types “” are array of S1 and S2 and set of DS1 and 
DS2 which are generated by (5) and (6): 
S1=’007000000010010011123334333334333433210070707
7707707777077767655645544544544444444444433320’,  
and 
S2=’177707000000101122333343333222210777777676767
66665665555454444444443332222221’,  
as a results 
DS1={0,7,0,1,0,1,0,1,2,3,4,3,4,3,4,3,2,1,0,7,0,7,0,7,0,7,0,7,0,
7,6,7,6,5,6,4,5,4,5,4,5,4,3,0} 
and 
S2={1,7,0,7,0,1,0,1,2,3,4,3,2,1,0,7,6,7,6,7,6,7,6,5,6,5,4,5,4,3,
2,1} 
and then: 
QSP (S1) = 44 and QSP (S2) = 32.
6. Discriminator threshold 
Suppose a database (data dictionary) contained many
folders that each of them is a list of the QSP value of 
binary image words. All mixed machine-printed and hand-
written words in each folder are the same words. 
Our other objective is categorizing of these two types of 
366
Authorized licensed use limited to: Aegean University. Downloaded on July 27,2010 at 15:13:07 UTC from IEEE Xplore.  Restrictions apply. 
words in each folder by a discriminator threshold which is 
called DT-HM3 in this research and is illustrated in 
figure5.  
       
'
(!)
	*+
Given database, T, includes m folders (cluster) such as 
Ci which contains machine-printed and hand-written 
mixed and the same form words. 
T = {Ci: i=1, 2…, m},    (7) 
Ci = {wji: i=1, 2 …, m and j = 1, 2…, Ni},   (8)
where wji is the QSP of either machine-printed or hand-
written and Ni is the number of the words in Ci. 
The sequences Yi, i=1, 2…, m are named a QSP-array and 
defined by: 
Yi = { yji: yji = QSP(wji), j = 1, 2, …, Ni },  (9) 
In order to distinguish between hand-written and machine-
printed words, all elements of any sequence Yi must be 
sorted. As default, we sort all sequences using an 
ascending approach that is defined as following: 
Yi-sorted = {vpi: vpi vp+1i, p=1, 2…, Ni-1}, i=1, 2 …, m (10) 
However it could be descending as well. Let Mi and Hi be 
two nonempty and sorted sub sequences which are parted 
form Yi-sorted such that elements of them are corresponded 
to machine-printed and hand-written sequentially.  
Let ai and bi as the following statements: 
ai= maximum (Mi)  and  
bi= minimum (Hi), i = 1,2 …, m   (11)  
Inspection of Yi-sorted , i=1, 2,… , m, achieves that 
machine-printed words have placed in left side of the-Yi-
sorted and hand-written words have positioned after them in 
                                                
3 Discriminator Threshold between Hand-written and Machine-
printed  
right side. In the other word, ai	bi hence there is a zi such 
as discriminator threshold which belongs to [ai bi]. Also zi
divides the Yi-sorted into two clusters. 
For example in Figure6, star symbols illustrate mixed 
and different samples of   after they have fed our 
method. The black margin is a divider of these two groups 
as a discriminator. 
,
	

In this research, zi is calculated using following method: 
Let mini and maxi are maximum value and minimum value 
of Yi-sorted, i=1, 2 …, m. 
Because Yi-sorted is ascending, 
mini = v1i and maxi = vNii, i=1, 2 …, m,  (12) 
zi = mini + r (maxi - mini) , i=1, 2…, m,  (13) 
where 0  r 1:  
r = (The number of machine-printed words in T)/ (The 
number of all of words in T)   (14) 
To obtain reliable results, the accuracy rats could be 
calculated using different value of zi which are selected 
from:  
r-d  zi   r+d, i=1, 2…, m.   (15) 
where arbitrary parameter d is 0< d<0.1. 
The QSP of machine-printed words is less than 
discriminator threshold; although, the QSP of hand-
written words is greater. The better r leads to a better 
threshold and a better threshold could make the results 
more accurate. 
7. Experiments and results 
Iranshahr4 is a new database of Farsi hand-written 
words which is used in this research. This database
includes 19584 mixed machine-printed and hand-written 
binary images files of 503 cities, towns and villages name 
of Iran. The hand-written words have been written by 
                                                
4 Iranshahr has authorized by department of Electrical engineering of 
Tarbiat Modarres University in Tehran for the purpose of researching 
about Farsi words hand-written recognition. 
M130 H130
Y130-Sorted
Y1
QSP 
           . . . 
           . . . 
Sort
DT-HM 
367
Authorized licensed use limited to: Aegean University. Downloaded on July 27,2010 at 15:13:07 UTC from IEEE Xplore.  Restrictions apply. 
different persons and machine-printed words have been 
printed bold and regular font styles. The numbers of 
machine-printed words are 4050 so the rate of machine-
printed samples in database is r = 20.7%. The used 
method to refine of Iranshahr is shown in Figure7. 
-
+
First step in refining of the database, machine-printed 
and hand-written words images are divided into 503 
different folders where the cities with the same form and 
names are placed in the same folder automatically. 
 For example the folder of Tabriz (
) contains the 
instances of words which are only either written or printed 
Tabrizas the Figure7 is. In second step, the damaged and 
wrong samples are removed manually. Finally, the 
presented method in section of 4-5 is applied to separate 
of machine-printed from hand-written words. For each 
folder, the Yi-sorted was constructed using equations (3)-
(10) and the discriminator thresholds, zi , i=1, 2,… , 503,
are calculated using equations (11)-(14) and then Hi and 
Mi, i=1, 2,… , 503. In fact, the refined database of Farsi 
hand-written words includes Hi, i=1, 2 …, 503. 
The sorted QSP-array of five different cities names 
(folders) in the Iranshahr is shown in columns of Table l. 
The QSP of machine-printed words are displayed in bold. 
The DT-HM of each folder is shown in first row and in 
parentheses which is calculated by equation (10). The
wrong estimated words are highlighted by “*” after 
comparing the QSP of each word with the DT-HM. The 
accuracy of each column is displayed in last row.  Except 
for folder of Tabriz, the first five words are machine-
printed and in Tabriz, a hand-written word wrongly 
recognized as a machine-printed word. In column of 
Tabriz four hand-written words and in Ghouchan one 
hand-written word have not separated correctly. 
In this experiment, d=0.04 is assumed which nine 
values are selected from r-d  z  r+d by step size 0.01 as 
DT-HM. In Table 2, the rate of accuracy of discrimination 
the machine-printed and handwritten words are displayed 
which are computed using the legibility feature and the 
DT-HM after performing on the database. 
In this research accuracy rate of 96.02% is resulted to 
discriminate machine-printed from hand-written words in 
database using our method. 
We applied the geometric classification algorithm 
(GCA) on the database to compare our results gained by 
QSP feature and the DT-HM. Toward this; ten instances 
were selected from each folder in the database as testing 
and rest as training data. The means of QSP of machine-
printed and handwritten, c+ and c-, also c and w were 
computed separately for the training data in every folder, 

&.#.
DT-HM Accuracy rate %
r - 0.04 96.02 
r - 0.03 95.68 
r - 0.02 95.80 
r - 0.01 93.38 
r 95.28 
r + 0.01 95.13 
r + 0.02 95.17 
r + 0.03 94.71 
r + 0.04 93.63 
	




	



) 



	






 !


 

Table 1 
/00
.12.
"$
Abadan 
(213) 
Ardabil 
(215) 
Tabriz 
(197) 
Ghouchna 
(258) 
Mehraban 
(230) 
149 161 136 197 177 
156 165 148 206 193 
158 177 152 211 195 
173 182 161* 228 203 
181 197 162 234 207 
229 219 166 254* 244
236 245 173* 261 254 
252 246 183* 284 278 
257 251 195* 291 282 
282 255 205 296 285 
284 266 214 299 289 
297 273 223 330 293 
298 276 234 331 294 
301 279 236 331 323 
319 289 245 338 325 
324 296 249 354 337 
333 298 263 356 338 
366 300 265 365 352 
371 308 266 368 359 
371 317 269 373 362 
377 325 281 390 374 
385 326 282 399 391 
424 361 322 435 396 
448 423 358 458 397 
458 424 430 49 434 
100% 100% 84% 96% 100%
368
Authorized licensed use limited to: Aegean University. Downloaded on July 27,2010 at 15:13:07 UTC from IEEE Xplore.  Restrictions apply. 
according to section 3. This process will continue until all 
patterns x are tested by equation (3) where x is belonged 
to the testing data in each 503 folders.  
Minimum height, width and area of the frame which 
contains word are common and useful features that other 
researchers have used to discriminate machine-printed 
words from hand-written words already. To compare and 
clarify, we applied those features on the unrefined version 
of the database. Table 3 shows the DT-HM and the 
obtained results using GCA on four features by d=0 which 
last column is our proposed feature. 
7. Conclusion 
In this study, we inspired legibility of words, a new 
criterion, to discriminate the machine-printed from hand-
written words using a computational method, QSP
function. Mixed words were separated using a 
discriminator threshold in specific cluster. 
To show the accuracy, we have applied our proposed 
method on unrefined and mixed database containing Farsi 
words. The promising results have obtained as we could 
lead to 96.02% success rate. For comparison, the features 
of height, width and area of words were considered.
Moreover, to evaluate the achieved result, the geometric 
classification algorithm implemented on the 
aforementioned database. The best rate of accuracy with 
the same parameter is 92.04% for previous works. It 
should be mentioned that in the same condition the 
accuracy rate of our suggested method is 95.28%. So as 
choosing the best discriminator threshold, the accuracy 
rate our method improved. In future the method can be 
applied on more several fonts and styles and databases 
with various languages.  
8. References 
[1] H. Freeman, “Computer Processing of Line-Drawing 
Images,” Computing Surveys,1974, vol. 6 (1), pp. 57–97. 
[2] F. M. Wahl, M. K. Y. Wong, and R. G. Casey, "Block 
segmentation and text extraction in mixed text/image 
documents," Comput. Vision, Graphics, Image Processing, 
1982, vol. 20, pp. 375-390. 
[3] A.C. Downton and C.G. Leedham, “Pre-processing of 
envelope images for optical character recognition”, 
In: Ninth Int. Conf. on Pattern Recognition, 1988, pp. 27-
31. 
[4] K. C. Fan, L. S. Wang and Y. T. Tu, “Classification of 
machine-printed and handwritten texts using character 
block layout variance”, Pattern Recognition, 1998, vol. 
31(9), pp.1275-1284.  
[5] [3] V. Pal and B. B. Chaudhuri, “Machine-printed and 
handwritten text lines identification”, Pattern Recognition 
Letters,2001, vol. 22, pp.431-441.  
[6] B. Schölkopf, A.J. Smola, “Learning with Kernels”, The 
MIT Press, Massachusetts Instituted of Technology, USA, 
2002. 
[7] Y. Zheng, H. Li, D. Doermann, “Text identification in 
Noisy Document Images Using Markov Random Field”, 
Proc of 7th ICDAR, 2003, pp.599-603. 
[8] [4] K. Nitz, W. Cruz, H. Aradhye, T. Shaham and G. 
Myers, “An Image-based Mail Facing and Orientation 
System for Enhanced Postal Automation”, Proc of 7th 
ICDAR, 2003, pp.694-698. 
[9] H. Ma and D. Doermann, “Gabor Filter Based Multiclass 
Classifier for Scanned Document Images”, Proc of 7th 
ICDAR, 2003, pp.968-972. 
[10] E. Kavallieratou, S. Stamatatos,” Discrimination of 
Machine-Printed from Handwritten Text Using Simple 
Structural Characteristics”, Proceedings of the 17th 
International Conference on Pattern Recognition ICPR, 
2004. 
[11] M. Cheiet, N. kharam, C. L. Liu, C. Y. Suen, “Character 
recognition Systems”, John Wiley & Sons, Inc., Hoboken, 
New Jersey, 2007. 
[12] J. Koyama, A. Hirose, M. Kato, ” Local-Spectrum-Based 
distinction between handwritten and machine-printed 
characters”, IEEE International Conference on Image 
Processing, San Diego, California, USA, 2008 , pp1021-
1024. 

.
!!.
Height % Width % Area % Legibility  %
DTT-HM 92.04 90.84 91.98 95.28 
GCA 91.96 85.11 89.41 92.38 
369
Authorized licensed use limited to: Aegean University. Downloaded on July 27,2010 at 15:13:07 UTC from IEEE Xplore.  Restrictions apply. 
